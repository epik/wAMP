<!DOCTYPE html> 
<html> 
<head>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1"> 
	<title>Audiophile</title> 
	<link rel="stylesheet" href="jquery/mobile/jquery.mobile-1.0a4.css" />
	<link rel="stylesheet" href="wamp/audiophile.css" />
	<script type="text/javascript" src="jquery/jquery-1.6.js"></script>
	<script type="text/javascript" src="jquery/jquery.event.drag.js"></script>
	<script type="text/javascript" src="jquery/jquery.event.drop.js"></script>
	<script type="text/javascript" src="scripts/lastfm.api.cache.js"></script>
	<script type="text/javascript" src="scripts/lastfm.api.js"></script>
	<script type="text/javascript" src="scripts/lastfm.api.md5.js"></script>
	<script language="javascript" type="text/javascript" src="wamp/wAMP.js"></script>
	<script language="javascript" type="text/javascript" src="wamp/skin.js"></script>
	<script type="text/javascript" src="scripts/widgets.js"></script>
	<script type="text/javascript" src="scripts/wScroll.js"></script>
	<script type="text/javascript" src="scripts/scene.js"></script>
    <script language="javascript" type="text/javascript">
	
	objwAMP.CreatePluginHook();
	objwAMP.setCurrentPath("/media/internal");
			
	$(document).bind("mobileinit", 
					function()
					{			
						$.extend(  $.mobile , { 
							ajaxFormsEnabled : false,
							ajaxLinksEnabled : false
						});
						
						$('#idSplash').live('pagebeforecreate',function(event, ui)
						{
							$('#idSplash').jqmData("Reload", "Normal");
						});
						
						$('#idSplash').live('pagebeforeshow',function(event, ui)
						{  
							if ($('#idSplash').jqmData("Reload") == "Refresh")
							{
								$('#idSplash').jqmData("Reload", "Normal");
							}
							else
							{
								$('#idSplash img').remove();
								
								objOptions.LoadDatabase();
								 
														
								$('<img />', {
										"src":objSkin.theme[objSkin.skinNum].splash.imgPath,
										"width":"320px",
										"height":"480px"
									}).appendTo($('#idSplashAddToDiv'));
							}
						});	
						
						$('#idSplash').live('pagehide', function(event, ui)
						{
							
						});
						
						$('#idSplash').live('pageshow',function(event, ui)
						{  	
							if (!($('#idSplash').jqmData("status")))
							{
								$('#idSplash').jqmData("status", "loaded");
								setTimeout(function() {sceneSplash.LoadSplash();},10);
							}
						}); 
					}
	);
    </script>
	<script type="text/javascript" src="jquery/mobile/jquery.mobile-1.0a4.js"></script>
	<script language="javascript" type="text/javascript">
		$('document').ready(function() 
		{
			if (window.PalmSystem) 
			{
			   window.PalmSystem.stageReady();
			}
				
			$('body').get(0).addEventListener("keyup", 
									function(e){backManager.handleBackGesture(e)}, false);
		
			$('body').css({'background-color': objSkin.theme[objSkin.skinNum].background.bgcolor, 
							'background-image': "none",
							'background-repeat': 'no-repeat'});
				
			$('body').append(objwAMP.df);
			
			console.log("Just added the object to the DOM");

			$('body').bind('pageshow', function(event, ui)
			{
				if (objOptions.bOptVis == true)
				{
					objOptions.Draw();
				}
			});
			
			objwAMP.checkOS();

			$('#idPlayer').live('pagebeforecreate',function(event, ui)
			{
				$('#idPlayer').jqmData("Reload", "Normal");
			});
			
			$('#idPlayer').live('pagecreate',function(event, ui)
			{  
				scenePlay.Initialize();
			});
			
			$('#idPlayer').live('pagebeforeshow',function(event, ui)
			{  
				scenePlay.LoadImages();
			});
			
			$('#idPlayer').live('pageshow',function(event, ui)
			{  
				$('#idPlayer').css({'background-color': 
											objSkin.theme[objSkin.skinNum].background.bgcolor, 
							'background-image': 
										"url(" + 
											objSkin.theme[objSkin.skinNum].background.bgimg + 
										")",
							'background-repeat': 'no-repeat'});
				
				
				if (scenePlay.bOpenOnStart)
				{
					scenePlay.PlayPauseChange();
					objwAMP.OpenSong();
				}
				
				$('#idPlayer').jqmData("Reload", "Normal");
			});

			$('#idList').live('pagebeforecreate',function(event, ui)
			{
				$('#idList').jqmData("Reload", "Normal");
			});
			
			$('#idList').live('pagebeforeshow',function(event, ui)
			{
				if ($('#idList').jqmData("Reload") == "Refresh")
					sceneList.FastChangeImages();
				else
					sceneList.LoadImages();
			});
		
			$('#idList').live('pageshow', function(event, ui)
			{
				$('#idList').jqmData("Reload", "Normal");
				sceneList.ScrollBox.RecalcBottom();
			});
		
			$('#idList').live('pagehide',function(event, ui)
			{  
				if ($('#idList').jqmData("Reload") != "Refresh")
					sceneList.ClearImages();
			});

			$('#idIndex').live('pagebeforecreate',function(event, ui)
			{
				$('#idIndex').jqmData("Reload", "Normal");
			});
		
			$('#idIndex').live('pagebeforeshow',function(event, ui)
			{			    
				sceneIndex.LoadImages();
			});

			$('#idIndex').live('pagecreate',function(event, ui)
			{
				sceneIndex.InitMyDiv();
			});
			
			$('#idIndex').live('pageshow', function(event, ui)
			{
				$('#idIndex').css({'background-color': 
											objSkin.theme[objSkin.skinNum].background.bgcolor, 
							'background-image': 
										"url(" + 
											objSkin.theme[objSkin.skinNum].background.bgimg + 
										")",
							'background-repeat': 'no-repeat'});
				$('#idIndex').jqmData("Reload", "Normal");
			});
			
			$('#idIndex').live('pagehide',function(event, ui)
			{  
			});
		
			$('#idPlaylist').live('pagebeforecreate',function(event, ui)
			{
				$('#idPlaylist').jqmData("Reload", "Normal");
				scenePlaylist.Init();
			});
		
			$('#idPlaylist').live('pagebeforeshow',function(event, ui)
			{
				scenePlaylist.SkinMyDiv();
				scenePlaylist.BuildPlaylist();
			});
	

			$('#idPlaylist').live('pageshow',function(event, ui)
			{
				scenePlaylist.ScrollBox.SimpleDraw("idPlaylistScroller", 
									function(event, domTarget) 
									{
										scenePlaylist.PlayClickedSong(event, 
																	domTarget);
									},
									function(event, iDir)
									{
										scenePlaylist.HandleSwipe(event, iDir);
									});
				var position = $(".nowplaying").position();
				scenePlaylist.ScrollBox.scrollTo(0 - position.top, 0);
			});
	
			// Load the option buttons
			
			$('<img />',{
				"src": objSkin.theme[objSkin.skinNum].list.optionImg,
				"class": "indexviewButton",
				"height": "46px",
				"width": "46px"
			}).appendTo($('#idOptionButtonList'));
			
			$('<img />',{
				"src": objSkin.theme[objSkin.skinNum].list.optionImg,
				"class": "indexviewButton",
				"height": "40px",
				"width": "40px"
			}).appendTo($('#idOptionButtonIndex'));
			
			$('#idOptionButtonPlayer').css(
			{
				"background-image":'url(' +
						objSkin.theme[objSkin.skinNum].player.optionImg +
						')'
			});
			
			$('.classOptionButton').live('click', function (event, ui) 
			{
				objOptions.Draw();
			});
			
			$('#idOptionButtonPlayer').click(function (event, ui) 
			{
				objOptions.Draw();
			});
			
			$('#idPlaylist').bind('songtrans', function() {scenePlaylist.UpdateHighlight();});
			
		});
		
    </script>
</head> 
<body> 

	<div data-role="page" id="idSplash">	
		<div id="idSplashAddToDiv" width="320" height="480" style="background-color:#ffffff; margin-left:auto; margin-right:auto;">
		</div>
	</div><!-- /page -->
	
	<div data-role="page" id="idPlayer">

			<div id="divNone" style="position:fixed; top:0; 
							left:0px; height:64px; width:320px;">
				<div id="nameGoesHere" style="position:relative; 
							font-size:20px; color:#FFF; padding-left:64px; padding-top:16px; 
							white-space:nowrap; font-family:font-family:helvetica, sans-serif;">
							</div>
				<div id="artistGoesHere" style="position:relative; 
							font-size:18px; color:#FFF; padding-left:64px; 
							white-space:nowrap; font-family:font-family:helvetica, sans-serif;">
							</div>
			</div>
			<div id="idRecord"></div>
			<div id="idScrubber"></div>
			<div id="idVolControl"></div>
			<div id="idFiltHere"></div>
			
			<div id="btnarm"></div>
			<div id="btneq"></div>	
			<div id="btnplay"></div>
			<div id="btnpause"></div>
			<div id="btnprev"></div>
			<div id="btnnext"></div>
			<div id="btnvol"></div>
			<div id="btnmute"></div>
			<div id="btnshuf"></div>
			<div id="btnrep"></div>
			<div id="btnnormal"></div>
			<div id="btndir"></div>
			
			<div id="btnplylst"></div>
			
			<div id="idOptionButtonPlayer"></div>

	</div><!-- /page -->
	
	
	<div data-role="page" id="idIndex">
		<div id="btnheader"></div>
		<div id="idPlayAllIndex"></div>
		<div id="idAlbumIndex"></div>
		<div id="idArtistIndex"></div>
		<div id="idGenreIndex"></div>
		<div id="idTitleIndex"></div>
		<div id="idFolderIndex"></div>
		<div id="idOptionIndex"></div>
	</div><!-- /page -->
	
	<div data-role="page" id="idList">
		<div id="idListHeader">
		</div>
		<div id="idWrapper">
			<div id="idScroller">
			<ul data-role="listview" id="idUlList">

			</ul>
			</div>
		</div>
		<div id="idListFooter">
			<form>
				<input type="search" name="name" id="idListFilter" value=""  />
			</form>
			<div id="idOptionButtonList" class="classOptionButton">
			</div>
		</div>
	</div>

	<div data-role="page" id="idPlaylist" class="songlistener">
		<div id="idPlaylistPicture" style="position:absolute";></div>
		<div style="height:350px; width:100%; position:relative; overflow:hidden;" id="idPlaylistWrapper">
			<div id="idPlaylistScroller">
				<ul data-role="listview" id="idPlyLstUL">

				</ul>
			</div>
		</div>
	</div>
	
	<div data-role="dialog" id="idDialog">
		<div data-role="header">
			<h1>Dialog</h1>
		</div><!-- /header -->
		<div data-role="content">
			<p id="idTellUser"></p>
			<span style="display: block;" id="idButtonGoesHere"><span></span></span>
		</div>

	</div><!-- /page -->
	
</body>
</html>